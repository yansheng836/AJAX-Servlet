<!DOCTYPE html>
<html>
<head>
<title>1_native_js_3_get.html</title>

<meta name="keywords" content="keyword1,keyword2,keyword3">
<meta name="description" content="this is my page">
<meta http-equiv="content-type" content="text/html; charset=UTF-8">

<link rel="stylesheet" type="text/css" href="../css/content_base.css">

</head>

<body>
	<h1>1.3 简单AJAX--open(method,url,async)方法之get</h1>

	<div class="explaination" style="height: 400px;">
		<h3>GET还是 POST?</h3>
		<ol style="font-size: 20px;">
			<li>与 POST 相比，GET 更简单也更快，并且在大部分情况下都能用。</li>
			<li>然而，在以下情况中，请使用 POST 请求：
				<ol>
					<li>无法使用缓存文件（更新服务器上的文件或数据库）。</li>
					<li>向服务器发送大量数据（POST 没有数据量限制）。</li>
					<li>发送包含未知字符的用户输入时，POST 比 GET 更稳定也更可靠。</li>
				</ol>
			</li>
		</ol>
		<h3>如何使用GET?</h3>
		<ol style="font-size: 20px;">
			<li>如果不传数据的话，直接xhr.open(method,url,async)，然后xhr.send()就可以了。</li>
			<li>如果需要传输数据，把数据拼接在url后面:url+"?key1=value1&key2+value2"。</li>
		</ol>
	</div>

	<div class="box">
		<input type="button" value="不传递数据的get方法" 
		style="width: 350px;"
		onclick="showMessage()">
		<div id="returnText"></div>
	</div>
	
	<div class="box">
		<input type="button" value="传递数据的get方法" onclick="showMessage1()">
		<div id="returnText1"></div>
	</div>


	<script type="text/javascript">
		/* console.log(); 是为了调试而添加的*/
		function showMessage() {
			/* 1.创建xhr对象 */
			var xhr;
			if (window.XMLHttpRequest) {
				xhr = new XMLHttpRequest(); // code for IE7+, Firefox, Chrome, Opera, Safari
			} else {
				xhr = new ActiveXObject("Microsoft.XMLHTTP"); // code for IE6, IE5
			}
			/* console.log("xhr：" + xhr); */
	
			/* 2.发送请求 */
			var url = "../SimpleServlet";
			xhr.open("GET", url, true);
			xhr.send();
	
			/* 3.监听响应状态，当“请求已完成，响应已就绪” 且 响应码为200时，显示返回信息 */
			xhr.onreadystatechange = function() {
				if (xhr.readyState == 4 && xhr.status == 200) {
					console.log(xhr.responseText);
					document.getElementById("returnText").innerHTML = xhr.responseText;
				}
			}
		}
		
		function showMessage1() {
			/* 1.创建xhr对象 */
			var xhr1;
			if (window.XMLHttpRequest) {
				xhr1 = new XMLHttpRequest(); // code for IE7+, Firefox, Chrome, Opera, Safari
			} else {
				xhr1 = new ActiveXObject("Microsoft.XMLHTTP"); // code for IE6, IE5
			}
			/* console.log("xhr：" + xhr); */
	
			/* 2.发送请求 */
			/* 拼接url:艾伦·麦席森·图灵，（英语：Alan Mathison Turing，又译阿兰·图灵） */
			var url1 = "../PostServlet" + "?fname=AlanMathison&lname=Turing";
			xhr1.open("GET", url1, true);
			xhr1.send();
	
			/* 3.监听响应状态，当“请求已完成，响应已就绪” 且 响应码为200时，显示返回信息 */
			xhr1.onreadystatechange = function() {
				if (xhr1.readyState == 4 && xhr1.status == 200) {
					console.log(xhr1.responseText);
					document.getElementById("returnText1").innerHTML = xhr1.responseText;
				}
			}
		}
	</script>
	
	<!-- 返回按钮（顶部，主页） -->
	<div id="returnButton"></div>
	<script src="/AJAX-Servlet/js/jQuery-3.3.0.js"></script>
	<script src="/AJAX-Servlet/js/return_button.js"></script>
</body>
</html>
